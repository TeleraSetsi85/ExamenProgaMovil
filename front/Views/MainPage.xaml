<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="front.Views.MainPage"
             Title="Películas">

    <Grid Padding="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Buscador -->
        <Frame BackgroundColor="LightGray" 
               HasShadow="True" 
               CornerRadius="8"
               Padding="10"
               Grid.Row="0">
            <StackLayout>
                <Label Text="Buscar por título:" 
                       FontSize="14" 
                       TextColor="Black"
                       FontAttributes="Bold"/>
                <Entry x:Name="EntryBuscar"
                       TextColor="Black"
                       Placeholder="Ingrese el título a buscar..."
                       TextChanged="EntryBuscar_TextChanged"
                       ClearButtonVisibility="WhileEditing"/>
            </StackLayout>
        </Frame>

        <!-- Grid de películas -->
        <CollectionView x:Name="ListaDePeliculas"
                        ItemsSource="{Binding peliculasFiltradas}"
                        Grid.Row="1"
                        Margin="0,10,0,0"
                        SelectionMode="None">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" Span="4" HorizontalItemSpacing="10" VerticalItemSpacing="15"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="5" CornerRadius="10" HasShadow="True" BackgroundColor="White">
                        <StackLayout>
                            <Image Source="{Binding ImageUrl}" 
                                   HeightRequest="250"  
                                WidthRequest="150"
                                Aspect="AspectFill"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Start"/>
                                <Label Text="{Binding Title}" 
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="Black"
                                   LineBreakMode="TailTruncation"
                                   HorizontalOptions="Center"/>
                                <Label Text="{Binding Genre}" 
                                   FontSize="14"
                                   TextColor="Gray"
                                   HorizontalOptions="Center"/>
                                <Label Text="{Binding Release}" 
                                   FontSize="14"
                                   TextColor="DarkGray"
                                   HorizontalOptions="Center"/>
                                <HorizontalStackLayout Padding="5" HorizontalOptions="Center">
                                    <Button Text="Editar" 
                                        Clicked="BtnEditar_Clicked"
                                        CornerRadius="23"
                                        BackgroundColor="Black"
                                        TextColor="White"
                                        CommandParameter="{Binding .}"/>
                                    <Button Text="Eliminar" 
                                        Clicked="BtnEliminar_Clicked"
                                        Margin="10,0,0,0"
                                        BackgroundColor="Black"
                                        TextColor="White"
                                        CornerRadius="23"
                                        CommandParameter="{Binding .}"/>
                                </HorizontalStackLayout>
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Botón agregar película -->

        <Button x:Name="BtnAgregarPelicula"
        Text="+"
        FontSize="30"
        FontAttributes="Bold"
        BackgroundColor="#007ACC"
        TextColor="White"
        CornerRadius="28"
        WidthRequest="56"
        HeightRequest="56"
        HorizontalOptions="End"
        VerticalOptions="End"
        Margin="0,0,20,20"
       Clicked="BtnAgregarPelicula_Clicked"/>
    </Grid>
</ContentPage>
